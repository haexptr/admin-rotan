@tailwind base;
@tailwind components;
@tailwind utilities;

/* Dark Mode Base Styles */
@layer base {
    /* Smooth transitions for theme changes */
    * {
        @apply transition-colors duration-200;
    }
    
    /* Dark mode scrollbar */
    .dark::-webkit-scrollbar {
        @apply w-2;
    }
    
    .dark::-webkit-scrollbar-track {
        @apply bg-gray-800;
    }
    
    .dark::-webkit-scrollbar-thumb {
        @apply bg-gray-600 rounded-full;
    }
    
    .dark::-webkit-scrollbar-thumb:hover {
        @apply bg-gray-500;
    }
}

/* FIXED: Chart container styles to prevent chart dropping issues */
@layer components {
    .chart-container {
        position: relative;
        width: 100%;
        height: 100%;
        min-height: 200px;
    }
    
    .chart-container canvas {
        position: absolute !important;
        top: 0;
        left: 0;
        width: 100% !important;
        height: 100% !important;
        max-width: none !important;
        max-height: none !important;
    }
    
    /* ========================================
       BEAUTIFUL THEME TOGGLE REPLACEMENT
       ======================================== */
    
    /* Modern Theme Toggle Container */
    .theme-toggle {
        @apply flex items-center justify-center p-2 rounded-xl relative overflow-hidden cursor-pointer;
        background: rgba(231, 231, 231, 0.05);
        border: 1px solid rgba(231, 231, 231, 0.08);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        margin-bottom: 16px;
    }

    .theme-toggle::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        transition: left 0.6s;
    }

    .theme-toggle:hover::before {
        left: 100%;
    }

    .theme-toggle:hover {
        background: rgba(231, 231, 231, 0.1);
        border-color: rgba(231, 231, 231, 0.15);
        transform: translateY(-1px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    /* Beautiful Toggle Switch */
    .theme-switch {
        @apply relative rounded-2xl cursor-pointer overflow-hidden;
        width: 56px;
        height: 30px;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border: 2px solid transparent;
    }

    .theme-switch.inactive {
        background: linear-gradient(135deg, #fbbf24, #f59e0b, #d97706);
        box-shadow: 
            0 4px 8px rgba(251, 191, 36, 0.3),
            inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .theme-switch.active {
        background: linear-gradient(135deg, #6366f1, #4f46e5, #3730a3);
        box-shadow: 
            0 4px 8px rgba(99, 102, 241, 0.3),
            inset 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .theme-switch:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
    }

    /* Animated Slider */
    .theme-slider {
        @apply absolute rounded-full flex items-center justify-center;
        top: 2px;
        left: 2px;
        width: 22px;
        height: 22px;
        background: linear-gradient(135deg, #ffffff, #f8fafc);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 10;
        border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .theme-slider.active {
        transform: translateX(26px);
        box-shadow: 
            0 4px 8px rgba(99, 102, 241, 0.3),
            0 2px 4px rgba(0, 0, 0, 0.1),
            inset 0 1px 2px rgba(255, 255, 255, 0.3);
    }

    .theme-slider.inactive {
        transform: translateX(0);
        box-shadow: 
            0 4px 8px rgba(251, 191, 36, 0.3),
            0 2px 4px rgba(0, 0, 0, 0.1),
            inset 0 1px 2px rgba(255, 255, 255, 0.3);
    }

    /* Beautiful Icons */
    .theme-icon {
        @apply transition-all;
        width: 14px;
        height: 14px;
        transition: all 0.3s ease;
        filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
    }

    .theme-icon.sun {
        color: #f59e0b;
        animation: rotate-sun 20s linear infinite;
    }

    .theme-icon.moon {
        color: #6366f1;
        animation: glow-moon 2s ease-in-out infinite alternate;
    }

    @keyframes rotate-sun {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    @keyframes glow-moon {
        from { filter: drop-shadow(0 0 2px rgba(99, 102, 241, 0.3)); }
        to { filter: drop-shadow(0 0 8px rgba(99, 102, 241, 0.6)); }
    }

    /* Hover Effects */
    .theme-toggle:hover .theme-slider {
        transform: scale(1.05);
    }

    .theme-toggle:hover .theme-slider.active {
        transform: translateX(26px) scale(1.05);
    }

    .theme-toggle:active .theme-slider {
        transform: scale(0.95);
    }

    .theme-toggle:active .theme-slider.active {
        transform: translateX(26px) scale(0.95);
    }
    
    /* Card Components for Dark Mode */
    .card {
        @apply bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 rounded-lg;
    }
    
    .card-header {
        @apply bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 rounded-t-lg;
    }
    
    /* Form Elements Dark Mode */
    .form-input {
        @apply bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100;
        @apply focus:border-blue-500 dark:focus:border-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400;
    }
    
    .form-select {
        @apply bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100;
    }
    
    /* Button Components */
    .btn-primary {
        @apply bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white;
    }
    
    .btn-secondary {
        @apply bg-gray-600 hover:bg-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500 text-white;
    }
    
    .btn-danger {
        @apply bg-red-600 hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600 text-white;
    }
}

/* FIXED: Ensure proper responsive behavior */
@layer utilities {
    .dashboard-grid {
        display: grid;
        gap: 1.5rem;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }
    
    .stats-grid {
        display: grid;
        gap: 1rem;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }
    
    .chart-responsive {
        width: 100% !important;
        height: auto !important;
        aspect-ratio: 16/9;
    }
    
    /* Text Color Utilities for Dark Mode */
    .text-primary {
        @apply text-gray-900 dark:text-gray-100;
    }
    
    .text-secondary {
        @apply text-gray-600 dark:text-gray-400;
    }
    
    .text-muted {
        @apply text-gray-500 dark:text-gray-500;
    }
    
    /* Background Utilities for Dark Mode */
    .bg-primary {
        @apply bg-white dark:bg-gray-800;
    }
    
    .bg-secondary {
        @apply bg-gray-50 dark:bg-gray-900;
    }
    
    /* Border Utilities for Dark Mode */
    .border-primary {
        @apply border-gray-200 dark:border-gray-700;
    }
}